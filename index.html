<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>è´ªåƒè›‡æ¸¸æˆ | ç»å…¸æ¸¸æˆåœ¨çº¿ç©</title>
  <!-- Tailwind CSS v3 -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Font Awesome -->
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#34D399',
            secondary: '#F59E0B',
            danger: '#EF4444',
            dark: '#1F2937',
            light: '#F3F4F6',
            'snake-green': '#10B981',
            'snake-blue': '#3B82F6',
            'snake-red': '#EF4444',
            'snake-purple': '#8B5CF6',
            'snake-yellow': '#F59E0B'
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
            game: ['"Press Start 2P"', 'cursive']
          },
          animation: {
            'bounce-slow': 'bounce 2s infinite',
            'pulse-fast': 'pulse 1s cubic-bezier(0.4, 0, 0.6, 1) infinite'
          }
        }
      }
    }
  </script>
  
  <style type="text/tailwindcss">
    @layer utilities {
      .text-shadow {
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
      }
      .text-shadow-lg {
        text-shadow: 4px 4px 8px rgba(0, 0, 0, 0.5);
      }
      .pixel-corners {
        clip-path: polygon(
          0% 5px, 5px 5px, 5px 0%, calc(100% - 5px) 0%, calc(100% - 5px) 5px, 
          100% 5px, 100% calc(100% - 5px), calc(100% - 5px) calc(100% - 5px), 
          calc(100% - 5px) 100%, 5px 100%, 5px calc(100% - 5px), 0% calc(100% - 5px)
        );
      }
      .game-grid {
        background-size: 20px 20px;
        background-image: 
          linear-gradient(to right, rgba(255, 255, 255, 0.1) 1px, transparent 1px),
          linear-gradient(to bottom, rgba(255, 255, 255, 0.1) 1px, transparent 1px);
      }
    }
    
    /* è‡ªå®šä¹‰æ»šåŠ¨æ¡ */
    ::-webkit-scrollbar {
      width: 10px;
      height: 10px;
    }
    
    ::-webkit-scrollbar-track {
      background: #1F2937;
    }
    
    ::-webkit-scrollbar-thumb {
      background: #34D399;
      border-radius: 5px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: #10B981;
    }
    
    /* æ¸¸æˆåŒºåŸŸæ ·å¼ */
    canvas {
      image-rendering: pixelated;
      image-rendering: -moz-crisp-edges;
      image-rendering: crisp-edges;
    }
    
    /* çš®è‚¤é€‰æ‹©å™¨æ ·å¼ */
    .skin-option {
      transition: all 0.2s ease;
    }
    
    .skin-option:hover {
      transform: scale(1.1);
    }
    
    .skin-option.selected {
      border: 2px solid #F59E0B;
      box-shadow: 0 0 10px #F59E0B;
    }
    
    /* æŒ‰é’®åŠ¨ç”» */
    .btn-game {
      transition: all 0.15s ease;
      position: relative;
      overflow: hidden;
    }
    
    .btn-game:after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }
    
    .btn-game:active:after {
      width: 300px;
      height: 300px;
      opacity: 0;
      transition: 0s;
    }
    
    /* é£Ÿç‰©é—ªçƒåŠ¨ç”» */
    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    .food-blink {
      animation: blink 1s infinite;
    }
    
    /* æ¸¸æˆç»“æŸåŠ¨ç”» */
    @keyframes gameOver {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }
    
    .game-over-animation {
      animation: gameOver 0.5s ease-in-out;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-dark to-gray-800 min-h-screen text-light font-sans">
  <!-- é¡µé¢å¤´éƒ¨ -->
  <header class="py-4 px-6 bg-dark bg-opacity-80 backdrop-blur-sm border-b border-gray-700">
    <div class="container mx-auto flex justify-between items-center">
      <div class="flex items-center space-x-2">
        <i class="fa fa-gamepad text-primary text-2xl"></i>
        <h1 class="text-2xl font-bold text-shadow">è´ªåƒè›‡æ¸¸æˆ</h1>
      </div>
      <nav>
        <ul class="flex space-x-6">
          <li><a href="#game" class="hover:text-primary transition-colors"><i class="fa fa-play-circle mr-1"></i>å¼€å§‹æ¸¸æˆ</a></li>
          <li><a href="#settings" class="hover:text-primary transition-colors"><i class="fa fa-cog mr-1"></i>è®¾ç½®</a></li>
          <li><a href="#leaderboard" class="hover:text-primary transition-colors"><i class="fa fa-trophy mr-1"></i>æ’è¡Œæ¦œ</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- ä¸»è¦å†…å®¹åŒº -->
  <main class="container mx-auto py-8 px-4">
    <!-- æ¸¸æˆä»‹ç» -->
    <section class="mb-12 text-center">
      <h2 class="text-3xl font-bold mb-4 text-shadow-lg">ç»å…¸è´ªåƒè›‡ï¼Œé‡æ¸©ç«¥å¹´å›å¿†</h2>
      <p class="max-w-2xl mx-auto text-gray-300">
        æ§åˆ¶è›‡çš„ç§»åŠ¨ï¼Œåƒé£Ÿç‰©é•¿å¤§ï¼Œé¿å…æ’åˆ°å¢™å£å’Œè‡ªå·±çš„èº«ä½“ã€‚æŒ‘æˆ˜æœ€é«˜åˆ†ï¼Œæˆä¸ºè´ªåƒè›‡å¤§å¸ˆï¼
      </p>
    </section>

    <!-- æ¸¸æˆåŒºåŸŸ -->
    <section id="game" class="mb-16">
      <div class="flex flex-col lg:flex-row gap-8 justify-center items-center">
        <!-- æ¸¸æˆç”»å¸ƒ -->
        <div class="relative">
          <div class="absolute -inset-1 bg-gradient-to-r from-snake-green to-snake-blue rounded-lg blur opacity-75 group-hover:opacity-100 transition duration-1000"></div>
          <div class="relative bg-dark border-4 border-gray-700 rounded-lg pixel-corners overflow-hidden">
            <canvas id="gameCanvas" class="game-grid" width="400" height="400"></canvas>
            
            <!-- æ¸¸æˆå¼€å§‹ç•Œé¢ -->
            <div id="startScreen" class="absolute inset-0 bg-dark bg-opacity-90 flex flex-col items-center justify-center">
              <h3 class="text-4xl font-bold mb-6 text-primary text-shadow-lg">è´ªåƒè›‡</h3>
              <button id="startBtn" class="btn-game bg-primary hover:bg-green-600 text-white font-bold py-3 px-8 rounded-lg text-xl mb-4 transition-all transform hover:scale-105">
                å¼€å§‹æ¸¸æˆ
              </button>
              <div class="flex space-x-4">
                <button id="howToPlayBtn" class="btn-game bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded-lg transition-all">
                  <i class="fa fa-question-circle mr-1"></i> æ¸¸æˆè¯´æ˜
                </button>
                <button id="settingsBtn" class="btn-game bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded-lg transition-all">
                  <i class="fa fa-cog mr-1"></i> è®¾ç½®
                </button>
              </div>
            </div>
            
            <!-- æ¸¸æˆæš‚åœç•Œé¢ -->
            <div id="pauseScreen" class="absolute inset-0 bg-dark bg-opacity-80 flex flex-col items-center justify-center hidden">
              <h3 class="text-3xl font-bold mb-6 text-secondary">æ¸¸æˆæš‚åœ</h3>
              <div class="flex space-x-4">
                <button id="resumeBtn" class="btn-game bg-primary hover:bg-green-600 text-white py-2 px-6 rounded-lg transition-all">
                  ç»§ç»­æ¸¸æˆ
                </button>
                <button id="restartBtnPause" class="btn-game bg-gray-700 hover:bg-gray-600 text-white py-2 px-6 rounded-lg transition-all">
                  é‡æ–°å¼€å§‹
                </button>
              </div>
            </div>
            
            <!-- æ¸¸æˆç»“æŸç•Œé¢ -->
            <div id="gameOverScreen" class="absolute inset-0 bg-dark bg-opacity-90 flex flex-col items-center justify-center hidden">
              <h3 class="text-4xl font-bold mb-2 text-danger game-over-animation">æ¸¸æˆç»“æŸ</h3>
              <p class="text-xl mb-2">ä½ çš„å¾—åˆ†: <span id="finalScore" class="text-secondary font-bold">0</span></p>
              <p class="text-gray-400 mb-6">æœ€é«˜å¾—åˆ†: <span id="highScore" class="text-primary font-bold">0</span></p>
              <div class="flex space-x-4">
                <button id="playAgainBtn" class="btn-game bg-primary hover:bg-green-600 text-white py-2 px-6 rounded-lg transition-all">
                  å†ç©ä¸€æ¬¡
                </button>
                <button id="backToMenuBtn" class="btn-game bg-gray-700 hover:bg-gray-600 text-white py-2 px-6 rounded-lg transition-all">
                  è¿”å›èœå•
                </button>
              </div>
            </div>
          </div>
          
          <!-- æ¸¸æˆæ§åˆ¶æŒ‰é’® (ç§»åŠ¨ç«¯) -->
          <div id="mobileControls" class="mt-6 grid grid-cols-3 gap-2 hidden">
            <div></div>
            <button id="upBtn" class="btn-game bg-gray-700 hover:bg-gray-600 text-white py-3 rounded-lg">
              <i class="fa fa-arrow-up"></i>
            </button>
            <div></div>
            <button id="leftBtn" class="btn-game bg-gray-700 hover:bg-gray-600 text-white py-3 rounded-lg">
              <i class="fa fa-arrow-left"></i>
            </button>
            <button id="downBtn" class="btn-game bg-gray-700 hover:bg-gray-600 text-white py-3 rounded-lg">
              <i class="fa fa-arrow-down"></i>
            </button>
            <button id="rightBtn" class="btn-game bg-gray-700 hover:bg-gray-600 text-white py-3 rounded-lg">
              <i class="fa fa-arrow-right"></i>
            </button>
          </div>
        </div>
        
        <!-- æ¸¸æˆä¿¡æ¯å’Œæ§åˆ¶ -->
        <div class="w-full max-w-md">
          <div class="bg-gray-800 bg-opacity-80 backdrop-blur-sm rounded-lg p-6 border border-gray-700">
            <!-- æ¸¸æˆçŠ¶æ€ -->
            <div class="mb-6">
              <h3 class="text-xl font-bold mb-3 flex items-center">
                <i class="fa fa-heartbeat text-danger mr-2"></i> æ¸¸æˆçŠ¶æ€
              </h3>
              <div class="grid grid-cols-2 gap-4">
                <div class="bg-gray-700 p-3 rounded-lg">
                  <p class="text-sm text-gray-400">å½“å‰å¾—åˆ†</p>
                  <p id="currentScore" class="text-2xl font-bold text-secondary">0</p>
                </div>
                <div class="bg-gray-700 p-3 rounded-lg">
                  <p class="text-sm text-gray-400">æœ€é«˜å¾—åˆ†</p>
                  <p id="displayHighScore" class="text-2xl font-bold text-primary">0</p>
                </div>
                <div class="bg-gray-700 p-3 rounded-lg">
                  <p class="text-sm text-gray-400">å½“å‰é•¿åº¦</p>
                  <p id="snakeLength" class="text-2xl font-bold text-snake-blue">3</p>
                </div>
                <div class="bg-gray-700 p-3 rounded-lg">
                  <p class="text-sm text-gray-400">æ¸¸æˆé€Ÿåº¦</p>
                  <p id="gameSpeed" class="text-2xl font-bold text-snake-purple">ä¸­ç­‰</p>
                </div>
              </div>
            </div>
            
            <!-- æ¸¸æˆæ§åˆ¶ -->
            <div class="mb-6">
              <h3 class="text-xl font-bold mb-3 flex items-center">
                <i class="fa fa-gamepad text-primary mr-2"></i> æ¸¸æˆæ§åˆ¶
              </h3>
              <div class="flex flex-wrap gap-2">
                <button id="pauseBtn" class="btn-game bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded-lg transition-all flex-1">
                  <i class="fa fa-pause mr-1"></i> æš‚åœ
                </button>
                <button id="restartBtn" class="btn-game bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded-lg transition-all flex-1">
                  <i class="fa fa-refresh mr-1"></i> é‡æ–°å¼€å§‹
                </button>
              </div>
              <div class="mt-3 text-sm text-gray-400">
                <p><i class="fa fa-keyboard-o mr-1"></i> é”®ç›˜æ§åˆ¶: â†‘ â†“ â† â†’ æ–¹å‘é”®</p>
                <p><i class="fa fa-space-shuttle mr-1"></i> ç©ºæ ¼é”®: æš‚åœ/ç»§ç»­æ¸¸æˆ</p>
              </div>
            </div>
            
            <!-- éš¾åº¦è®¾ç½® -->
            <div>
              <h3 class="text-xl font-bold mb-3 flex items-center">
                <i class="fa fa-tachometer text-snake-yellow mr-2"></i> éš¾åº¦è®¾ç½®
              </h3>
              <div class="flex flex-wrap gap-2">
                <button data-speed="slow" class="difficulty-btn btn-game bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded-lg transition-all flex-1">
                  ç®€å•
                </button>
                <button data-speed="medium" class="difficulty-btn btn-game bg-primary text-white py-2 px-4 rounded-lg transition-all flex-1">
                  ä¸­ç­‰
                </button>
                <button data-speed="fast" class="difficulty-btn btn-game bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded-lg transition-all flex-1">
                  å›°éš¾
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- è®¾ç½®åŒºåŸŸ -->
    <section id="settings" class="mb-16">
      <div class="bg-gray-800 bg-opacity-80 backdrop-blur-sm rounded-lg p-6 border border-gray-700 max-w-3xl mx-auto">
        <h2 class="text-2xl font-bold mb-6 text-center text-shadow">æ¸¸æˆè®¾ç½®</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <!-- è›‡çš®è‚¤é€‰æ‹© -->
          <div>
            <h3 class="text-xl font-bold mb-4 flex items-center">
              <i class="fa fa-paint-brush text-snake-blue mr-2"></i> è›‡çš®è‚¤
            </h3>
            <div class="grid grid-cols-3 gap-4">
              <div class="skin-option selected" data-skin="green">
                <div class="w-full h-24 bg-gray-700 rounded-lg flex items-center justify-center overflow-hidden">
                  <div class="flex">
                    <div class="w-8 h-8 bg-snake-green rounded"></div>
                    <div class="w-8 h-8 bg-green-500 rounded mx-1"></div>
                    <div class="w-8 h-8 bg-green-400 rounded"></div>
                  </div>
                </div>
                <p class="text-center mt-2 text-sm">ç»å…¸ç»¿</p>
              </div>
              <div class="skin-option" data-skin="blue">
                <div class="w-full h-24 bg-gray-700 rounded-lg flex items-center justify-center overflow-hidden">
                  <div class="flex">
                    <div class="w-8 h-8 bg-snake-blue rounded"></div>
                    <div class="w-8 h-8 bg-blue-500 rounded mx-1"></div>
                    <div class="w-8 h-8 bg-blue-400 rounded"></div>
                  </div>
                </div>
                <p class="text-center mt-2 text-sm">æµ·æ´‹è“</p>
              </div>
              <div class="skin-option" data-skin="red">
                <div class="w-full h-24 bg-gray-700 rounded-lg flex items-center justify-center overflow-hidden">
                  <div class="flex">
                    <div class="w-8 h-8 bg-snake-red rounded"></div>
                    <div class="w-8 h-8 bg-red-500 rounded mx-1"></div>
                    <div class="w-8 h-8 bg-red-400 rounded"></div>
                  </div>
                </div>
                <p class="text-center mt-2 text-sm">ç«ç„°çº¢</p>
              </div>
              <div class="skin-option" data-skin="purple">
                <div class="w-full h-24 bg-gray-700 rounded-lg flex items-center justify-center overflow-hidden">
                  <div class="flex">
                    <div class="w-8 h-8 bg-snake-purple rounded"></div>
                    <div class="w-8 h-8 bg-purple-500 rounded mx-1"></div>
                    <div class="w-8 h-8 bg-purple-400 rounded"></div>
                  </div>
                </div>
                <p class="text-center mt-2 text-sm">ç¥ç§˜ç´«</p>
              </div>
              <div class="skin-option" data-skin="yellow">
                <div class="w-full h-24 bg-gray-700 rounded-lg flex items-center justify-center overflow-hidden">
                  <div class="flex">
                    <div class="w-8 h-8 bg-snake-yellow rounded"></div>
                    <div class="w-8 h-8 bg-yellow-500 rounded mx-1"></div>
                    <div class="w-8 h-8 bg-yellow-400 rounded"></div>
                  </div>
                </div>
                <p class="text-center mt-2 text-sm">é»„é‡‘é»„</p>
              </div>
              <div class="skin-option" data-skin="rainbow">
                <div class="w-full h-24 bg-gray-700 rounded-lg flex items-center justify-center overflow-hidden">
                  <div class="flex">
                    <div class="w-8 h-8 bg-red-500 rounded"></div>
                    <div class="w-8 h-8 bg-yellow-500 rounded mx-1"></div>
                    <div class="w-8 h-8 bg-green-500 rounded"></div>
                  </div>
                </div>
                <p class="text-center mt-2 text-sm">å½©è™¹è›‡</p>
              </div>
            </div>
          </div>
          
          <!-- é£Ÿç‰©æ ·å¼é€‰æ‹© -->
          <div>
            <h3 class="text-xl font-bold mb-4 flex items-center">
              <i class="fa fa-cutlery text-snake-red mr-2"></i> é£Ÿç‰©æ ·å¼
            </h3>
            <div class="grid grid-cols-3 gap-4">
              <div class="food-option selected" data-food="apple">
                <div class="w-full h-24 bg-gray-700 rounded-lg flex items-center justify-center overflow-hidden">
                  <div class="w-10 h-10 bg-red-500 rounded-full flex items-center justify-center">
                    <i class="fa fa-apple text-white text-xl"></i>
                  </div>
                </div>
                <p class="text-center mt-2 text-sm">è‹¹æœ</p>
              </div>
              <div class="food-option" data-food="cherry">
                <div class="w-full h-24 bg-gray-700 rounded-lg flex items-center justify-center overflow-hidden">
                  <div class="w-10 h-10 bg-pink-600 rounded-full flex items-center justify-center">
                    <i class="fa fa-heart text-white text-xl"></i>
                  </div>
                </div>
                <p class="text-center mt-2 text-sm">æ¨±æ¡ƒ</p>
              </div>
              <div class="food-option" data-food="star">
                <div class="w-full h-24 bg-gray-700 rounded-lg flex items-center justify-center overflow-hidden">
                  <div class="w-10 h-10 bg-yellow-400 rounded-full flex items-center justify-center">
                    <i class="fa fa-star text-white text-xl"></i>
                  </div>
                </div>
                <p class="text-center mt-2 text-sm">æ˜Ÿæ˜Ÿ</p>
              </div>
              <div class="food-option" data-food="diamond">
                <div class="w-full h-24 bg-gray-700 rounded-lg flex items-center justify-center overflow-hidden">
                  <div class="w-10 h-10 bg-blue-400 rounded-full flex items-center justify-center">
                    <i class="fa fa-diamond text-white text-xl"></i>
                  </div>
                </div>
                <p class="text-center mt-2 text-sm">é’»çŸ³</p>
              </div>
              <div class="food-option" data-food="coin">
                <div class="w-full h-24 bg-gray-700 rounded-lg flex items-center justify-center overflow-hidden">
                  <div class="w-10 h-10 bg-yellow-500 rounded-full flex items-center justify-center">
                    <i class="fa fa-money text-white text-xl"></i>
                  </div>
                </div>
                <p class="text-center mt-2 text-sm">é‡‘å¸</p>
              </div>
              <div class="food-option" data-food="pizza">
                <div class="w-full h-24 bg-gray-700 rounded-lg flex items-center justify-center overflow-hidden">
                  <div class="w-10 h-10 bg-orange-500 rounded-full flex items-center justify-center">
                    <i class="fa fa-cutlery text-white text-xl"></i>
                  </div>
                </div>
                <p class="text-center mt-2 text-sm">æŠ«è¨</p>
              </div>
            </div>
          </div>
        </div>
        
        <!-- å…¶ä»–è®¾ç½® -->
        <div class="mt-8">
          <h3 class="text-xl font-bold mb-4 flex items-center">
            <i class="fa fa-sliders text-snake-yellow mr-2"></i> å…¶ä»–è®¾ç½®
          </h3>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="bg-gray-700 p-4 rounded-lg">
              <label class="flex items-center justify-between cursor-pointer">
                <span>èƒŒæ™¯éŸ³ä¹</span>
                <div class="relative">
                  <input type="checkbox" id="musicToggle" class="sr-only" checked>
                  <div class="block bg-gray-600 w-14 h-8 rounded-full"></div>
                  <div class="dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition-transform"></div>
                </div>
              </label>
            </div>
            <div class="bg-gray-700 p-4 rounded-lg">
              <label class="flex items-center justify-between cursor-pointer">
                <span>éŸ³æ•ˆ</span>
                <div class="relative">
                  <input type="checkbox" id="soundToggle" class="sr-only" checked>
                  <div class="block bg-gray-600 w-14 h-8 rounded-full"></div>
                  <div class="dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition-transform"></div>
                </div>
              </label>
            </div>
            <div class="bg-gray-700 p-4 rounded-lg">
              <label class="flex items-center justify-between">
                <span>ç½‘æ ¼çº¿</span>
                <div class="relative">
                  <input type="checkbox" id="gridToggle" class="sr-only" checked>
                  <div class="block bg-gray-600 w-14 h-8 rounded-full"></div>
                  <div class="dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition-transform"></div>
                </div>
              </label>
            </div>
            <div class="bg-gray-700 p-4 rounded-lg">
              <label class="flex items-center justify-between">
                <span>æ·±è‰²æ¨¡å¼</span>
                <div class="relative">
                  <input type="checkbox" id="darkModeToggle" class="sr-only" checked>
                  <div class="block bg-gray-600 w-14 h-8 rounded-full"></div>
                  <div class="dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition-transform"></div>
                </div>
              </label>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- æ’è¡Œæ¦œåŒºåŸŸ -->
    <section id="leaderboard" class="mb-16">
      <div class="bg-gray-800 bg-opacity-80 backdrop-blur-sm rounded-lg p-6 border border-gray-700 max-w-3xl mx-auto">
        <h2 class="text-2xl font-bold mb-6 text-center text-shadow">æ¸¸æˆæ’è¡Œæ¦œ</h2>
        
        <div class="overflow-x-auto">
          <table class="w-full text-left">
            <thead>
              <tr class="border-b border-gray-700">
                <th class="py-3 px-4">æ’å</th>
                <th class="py-3 px-4">ç©å®¶</th>
                <th class="py-3 px-4">å¾—åˆ†</th>
                <th class="py-3 px-4">æ—¥æœŸ</th>
              </tr>
            </thead>
            <tbody id="leaderboardBody">
              <tr class="border-b border-gray-700 hover:bg-gray-700">
                <td class="py-3 px-4"><i class="fa fa-trophy text-yellow-500 mr-2"></i>1</td>
                <td class="py-3 px-4">è´ªåƒè›‡å¤§å¸ˆ</td>
                <td class="py-3 px-4 font-bold">1250</td>
                <td class="py-3 px-4">2025-07-21</td>
              </tr>
              <tr class="border-b border-gray-700 hover:bg-gray-700">
                <td class="py-3 px-4"><i class="fa fa-trophy text-gray-400 mr-2"></i>2</td>
                <td class="py-3 px-4">æ¸¸æˆçˆ±å¥½è€…</td>
                <td class="py-3 px-4 font-bold">980</td>
                <td class="py-3 px-4">2025-07-20</td>
              </tr>
              <tr class="border-b border-gray-700 hover:bg-gray-700">
                <td class="py-3 px-4"><i class="fa fa-trophy text-amber-700 mr-2"></i>3</td>
                <td class="py-3 px-4">è›‡è›‡äº‰éœ¸</td>
                <td class="py-3 px-4 font-bold">850</td>
                <td class="py-3 px-4">2025-07-19</td>
              </tr>
              <tr class="border-b border-gray-700 hover:bg-gray-700">
                <td class="py-3 px-4">4</td>
                <td class="py-3 px-4">ä¼‘é—²ç©å®¶</td>
                <td class="py-3 px-4 font-bold">720</td>
                <td class="py-3 px-4">2025-07-18</td>
              </tr>
              <tr class="border-b border-gray-700 hover:bg-gray-700">
                <td class="py-3 px-4">5</td>
                <td class="py-3 px-4">åˆå­¦è€…</td>
                <td class="py-3 px-4 font-bold">650</td>
                <td class="py-3 px-4">2025-07-17</td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <div class="mt-6 text-center">
          <button id="clearLeaderboardBtn" class="btn-game bg-gray-700 hover:bg-gray-600 text-white py-2 px-6 rounded-lg transition-all">
            <i class="fa fa-trash mr-1"></i> æ¸…ç©ºæ’è¡Œæ¦œ
          </button>
        </div>
      </div>
    </section>
  </main>

  <!-- é¡µè„š -->
  <footer class="bg-dark bg-opacity-80 backdrop-blur-sm border-t border-gray-700 py-6">
    <div class="container mx-auto px-4 text-center text-gray-400">
      <p>&copy; 2025 è´ªåƒè›‡æ¸¸æˆ | ç»å…¸æ¸¸æˆåœ¨çº¿ç©</p>
      <div class="mt-4 flex justify-center space-x-4">
        <a href="#" class="hover:text-primary transition-colors"><i class="fa fa-github text-xl"></i></a>
        <a href="#" class="hover:text-primary transition-colors"><i class="fa fa-twitter text-xl"></i></a>
        <a href="#" class="hover:text-primary transition-colors"><i class="fa fa-facebook text-xl"></i></a>
      </div>
    </div>
  </footer>

  <!-- æ¸¸æˆè¯´æ˜æ¨¡æ€æ¡† -->
  <div id="howToPlayModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-xl font-bold text-primary">æ¸¸æˆè¯´æ˜</h3>
        <button id="closeHowToPlayBtn" class="text-gray-400 hover:text-white">
          <i class="fa fa-times text-xl"></i>
        </button>
      </div>
      <div class="text-gray-300">
        <p class="mb-3"><i class="fa fa-arrow-right text-primary mr-2"></i> ä½¿ç”¨æ–¹å‘é”® â†‘ â†“ â† â†’ æ§åˆ¶è›‡çš„ç§»åŠ¨æ–¹å‘</p>
        <p class="mb-3"><i class="fa fa-arrow-right text-primary mr-2"></i> åƒåˆ°é£Ÿç‰©åè›‡ä¼šå˜é•¿ï¼Œå¾—åˆ†å¢åŠ </p>
        <p class="mb-3"><i class="fa fa-arrow-right text-primary mr-2"></i> æ’åˆ°å¢™å£æˆ–è‡ªå·±çš„èº«ä½“æ¸¸æˆç»“æŸ</p>
        <p class="mb-3"><i class="fa fa-arrow-right text-primary mr-2"></i> ç©ºæ ¼é”®å¯ä»¥æš‚åœ/ç»§ç»­æ¸¸æˆ</p>
        <p class="mb-3"><i class="fa fa-arrow-right text-primary mr-2"></i> å¯ä»¥åœ¨è®¾ç½®ä¸­è°ƒæ•´æ¸¸æˆéš¾åº¦å’Œå¤–è§‚</p>
        <p><i class="fa fa-arrow-right text-primary mr-2"></i> æŒ‘æˆ˜æœ€é«˜åˆ†ï¼Œæˆä¸ºè´ªåƒè›‡å¤§å¸ˆï¼</p>
      </div>
      <div class="mt-6 text-center">
        <button id="gotItBtn" class="btn-game bg-primary hover:bg-green-600 text-white py-2 px-6 rounded-lg transition-all">
          æ˜ç™½äº†
        </button>
      </div>
    </div>
  </div>

  <!-- JavaScript -->
  <script>
    // æ¸¸æˆé…ç½®
    const config = {
      gridSize: 20,
      tileSize: 20,
      initialSpeed: 150,
      speeds: {
        slow: 200,
        medium: 150,
        fast: 100
      },
      directions: {
        UP: { x: 0, y: -1 },
        DOWN: { x: 0, y: 1 },
        LEFT: { x: -1, y: 0 },
        RIGHT: { x: 1, y: 0 }
      },
      snakeColors: {
        green: ['#10B981', '#34D399', '#6EE7B7'],
        blue: ['#3B82F6', '#60A5FA', '#93C5FD'],
        red: ['#EF4444', '#F87171', '#FCA5A5'],
        purple: ['#8B5CF6', '#A78BFA', '#C4B5FD'],
        yellow: ['#F59E0B', '#FBBF24', '#FCD34D'],
        rainbow: ['#EF4444', '#F59E0B', '#10B981', '#3B82F6', '#8B5CF6']
      },
      foodColors: {
        apple: '#EF4444',
        cherry: '#EC4899',
        star: '#FBBF24',
        diamond: '#3B82F6',
        coin: '#F59E0B',
        pizza: '#F97316'
      },
      foodIcons: {
        apple: 'fa-apple',
        cherry: 'fa-heart',
        star: 'fa-star',
        diamond: 'fa-diamond',
        coin: 'fa-money',
        pizza: 'fa-cutlery'
      }
    };

    // æ¸¸æˆçŠ¶æ€
    const game = {
      canvas: null,
      ctx: null,
      snake: [],
      food: null,
      direction: config.directions.RIGHT,
      nextDirection: config.directions.RIGHT,
      score: 0,
      highScore: 0,
      speed: config.initialSpeed,
      isRunning: false,
      isPaused: false,
      currentSkin: 'green',
      currentFood: 'apple',
      gameLoop: null
    };

    // DOM å…ƒç´ 
    const elements = {
      gameCanvas: document.getElementById('gameCanvas'),
      startScreen: document.getElementById('startScreen'),
      pauseScreen: document.getElementById('pauseScreen'),
      gameOverScreen: document.getElementById('gameOverScreen'),
      startBtn: document.getElementById('startBtn'),
      pauseBtn: document.getElementById('pauseBtn'),
      resumeBtn: document.getElementById('resumeBtn'),
      restartBtn: document.getElementById('restartBtn'),
      restartBtnPause: document.getElementById('restartBtnPause'),
      playAgainBtn: document.getElementById('playAgainBtn'),
      backToMenuBtn: document.getElementById('backToMenuBtn'),
      howToPlayBtn: document.getElementById('howToPlayBtn'),
      settingsBtn: document.getElementById('settingsBtn'),
      closeHowToPlayBtn: document.getElementById('closeHowToPlayBtn'),
      gotItBtn: document.getElementById('gotItBtn'),
      howToPlayModal: document.getElementById('howToPlayModal'),
      currentScore: document.getElementById('currentScore'),
      displayHighScore: document.getElementById('displayHighScore'),
      finalScore: document.getElementById('finalScore'),
      highScore: document.getElementById('highScore'),
      snakeLength: document.getElementById('snakeLength'),
      gameSpeed: document.getElementById('gameSpeed'),
      difficultyBtns: document.querySelectorAll('.difficulty-btn'),
      skinOptions: document.querySelectorAll('.skin-option'),
      foodOptions: document.querySelectorAll('.food-option'),
      mobileControls: document.getElementById('mobileControls'),
      upBtn: document.getElementById('upBtn'),
      downBtn: document.getElementById('downBtn'),
      leftBtn: document.getElementById('leftBtn'),
      rightBtn: document.getElementById('rightBtn'),
      musicToggle: document.getElementById('musicToggle'),
      soundToggle: document.getElementById('soundToggle'),
      gridToggle: document.getElementById('gridToggle'),
      darkModeToggle: document.getElementById('darkModeToggle'),
      clearLeaderboardBtn: document.getElementById('clearLeaderboardBtn'),
      leaderboardBody: document.getElementById('leaderboardBody')
    };

    // åˆå§‹åŒ–æ¸¸æˆ
    function initGame() {
      // è·å–ç”»å¸ƒå’Œä¸Šä¸‹æ–‡
      game.canvas = elements.gameCanvas;
      game.ctx = game.canvas.getContext('2d');
      
      // è®¾ç½®ç”»å¸ƒå°ºå¯¸
      game.canvas.width = config.gridSize * config.tileSize;
      game.canvas.height = config.gridSize * config.tileSize;
      
      // åŠ è½½æœ€é«˜åˆ†
      loadHighScore();
      elements.displayHighScore.textContent = game.highScore;
      
      // åŠ è½½æ’è¡Œæ¦œ
      loadLeaderboard();
      
      // æ£€æŸ¥è®¾å¤‡ç±»å‹ï¼Œæ˜¾ç¤º/éšè—ç§»åŠ¨æ§åˆ¶
      checkDeviceType();
      
      // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬
      initEventListeners();
      
      // åˆå§‹åŒ–è®¾ç½®
      initSettings();
    }

    // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬
    function initEventListeners() {
      // æ¸¸æˆæ§åˆ¶æŒ‰é’®
      elements.startBtn.addEventListener('click', startGame);
      elements.pauseBtn.addEventListener('click', pauseGame);
      elements.resumeBtn.addEventListener('click', resumeGame);
      elements.restartBtn.addEventListener('click', restartGame);
      elements.restartBtnPause.addEventListener('click', restartGame);
      elements.playAgainBtn.addEventListener('click', restartGame);
      elements.backToMenuBtn.addEventListener('click', backToMenu);
      
      // æ¨¡æ€æ¡†æŒ‰é’®
      elements.howToPlayBtn.addEventListener('click', showHowToPlay);
      elements.closeHowToPlayBtn.addEventListener('click', hideHowToPlay);
      elements.gotItBtn.addEventListener('click', hideHowToPlay);
      elements.settingsBtn.addEventListener('click', () => {
        document.getElementById('settings').scrollIntoView({ behavior: 'smooth' });
      });
      
      // é”®ç›˜æ§åˆ¶
      document.addEventListener('keydown', handleKeyDown);
      
      // ç§»åŠ¨è®¾å¤‡æ§åˆ¶
      elements.upBtn.addEventListener('click', () => changeDirection(config.directions.UP));
      elements.downBtn.addEventListener('click', () => changeDirection(config.directions.DOWN));
      elements.leftBtn.addEventListener('click', () => changeDirection(config.directions.LEFT));
      elements.rightBtn.addEventListener('click', () => changeDirection(config.directions.RIGHT));
      
      // éš¾åº¦è®¾ç½®
      elements.difficultyBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          const speed = btn.dataset.speed;
          setDifficulty(speed);
          
          // æ›´æ–°æŒ‰é’®æ ·å¼
          elements.difficultyBtns.forEach(b => {
            b.classList.remove('bg-primary');
            b.classList.add('bg-gray-700', 'hover:bg-gray-600');
          });
          btn.classList.remove('bg-gray-700', 'hover:bg-gray-600');
          btn.classList.add('bg-primary');
        });
      });
      
      // çš®è‚¤é€‰æ‹©
      elements.skinOptions.forEach(option => {
        option.addEventListener('click', () => {
          const skin = option.dataset.skin;
          setSnakeSkin(skin);
          
          // æ›´æ–°é€‰ä¸­çŠ¶æ€
          elements.skinOptions.forEach(o => o.classList.remove('selected'));
          option.classList.add('selected');
        });
      });
      
      // é£Ÿç‰©æ ·å¼é€‰æ‹©
      elements.foodOptions.forEach(option => {
        option.addEventListener('click', () => {
          const food = option.dataset.food;
          setFoodStyle(food);
          
          // æ›´æ–°é€‰ä¸­çŠ¶æ€
          elements.foodOptions.forEach(o => o.classList.remove('selected'));
          option.classList.add('selected');
        });
      });
      
      // å…¶ä»–è®¾ç½®
      elements.musicToggle.addEventListener('change', toggleMusic);
      elements.soundToggle.addEventListener('change', toggleSound);
      elements.gridToggle.addEventListener('change', toggleGrid);
      elements.darkModeToggle.addEventListener('change', toggleDarkMode);
      
      // æ’è¡Œæ¦œ
      elements.clearLeaderboardBtn.addEventListener('click', clearLeaderboard);
      
      // çª—å£å¤§å°å˜åŒ–æ—¶é‡æ–°è°ƒæ•´
      window.addEventListener('resize', checkDeviceType);
    }

    // åˆå§‹åŒ–è®¾ç½®
    function initSettings() {
      // åŠ è½½ä¿å­˜çš„è®¾ç½®
      const savedSettings = JSON.parse(localStorage.getItem('snakeSettings')) || {};
      
      // è®¾ç½®è›‡çš®è‚¤
      if (savedSettings.skin) {
        setSnakeSkin(savedSettings.skin);
        elements.skinOptions.forEach(option => {
          if (option.dataset.skin === savedSettings.skin) {
            option.classList.add('selected');
          } else {
            option.classList.remove('selected');
          }
        });
      }
      
      // è®¾ç½®é£Ÿç‰©æ ·å¼
      if (savedSettings.food) {
        setFoodStyle(savedSettings.food);
        elements.foodOptions.forEach(option => {
          if (option.dataset.food === savedSettings.food) {
            option.classList.add('selected');
          } else {
            option.classList.remove('selected');
          }
        });
      }
      
      // è®¾ç½®éš¾åº¦
      if (savedSettings.difficulty) {
        setDifficulty(savedSettings.difficulty);
        elements.difficultyBtns.forEach(btn => {
          if (btn.dataset.speed === savedSettings.difficulty) {
            btn.classList.remove('bg-gray-700', 'hover:bg-gray-600');
            btn.classList.add('bg-primary');
          } else {
            btn.classList.remove('bg-primary');
            btn.classList.add('bg-gray-700', 'hover:bg-gray-600');
          }
        });
      }
      
      // è®¾ç½®éŸ³ä¹
      if (savedSettings.music !== undefined) {
        elements.musicToggle.checked = savedSettings.music;
        toggleMusic();
      }
      
      // è®¾ç½®éŸ³æ•ˆ
      if (savedSettings.sound !== undefined) {
        elements.soundToggle.checked = savedSettings.sound;
        toggleSound();
      }
      
      // è®¾ç½®ç½‘æ ¼
      if (savedSettings.grid !== undefined) {
        elements.gridToggle.checked = savedSettings.grid;
        toggleGrid();
      }
      
      // è®¾ç½®æ·±è‰²æ¨¡å¼
      if (savedSettings.darkMode !== undefined) {
        elements.darkModeToggle.checked = savedSettings.darkMode;
        // ç›´æ¥æ›´æ–°UIï¼Œä¸è°ƒç”¨toggleDarkModeä»¥é¿å…å¾ªç¯è°ƒç”¨
        updateDarkModeUI(savedSettings.darkMode);
      } else {
        // é»˜è®¤ä½¿ç”¨æ·±è‰²æ¨¡å¼
        updateDarkModeUI(true);
      }
      
      // æ›´æ–°å¼€å…³æ ·å¼
      updateToggleSwitches();
    }

    // æ›´æ–°å¼€å…³æ ·å¼
    function updateToggleSwitches() {
      const toggles = [
        elements.musicToggle,
        elements.soundToggle,
        elements.gridToggle,
        elements.darkModeToggle
      ];
      
      toggles.forEach(toggle => {
        const dot = toggle.nextElementSibling.nextElementSibling;
        if (toggle.checked) {
          toggle.nextElementSibling.classList.remove('bg-gray-600');
          toggle.nextElementSibling.classList.add('bg-primary');
          dot.style.transform = 'translateX(100%)';
        } else {
          toggle.nextElementSibling.classList.remove('bg-primary');
          toggle.nextElementSibling.classList.add('bg-gray-600');
          dot.style.transform = 'translateX(0)';
        }
      });
    }

    // æ£€æŸ¥è®¾å¤‡ç±»å‹
    function checkDeviceType() {
      const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
      
      if (isMobile) {
        elements.mobileControls.classList.remove('hidden');
      } else {
        elements.mobileControls.classList.add('hidden');
      }
    }

    // å¼€å§‹æ¸¸æˆ
    function startGame() {
      // éšè—å¼€å§‹ç•Œé¢
      elements.startScreen.classList.add('hidden');
      
      // é‡ç½®æ¸¸æˆçŠ¶æ€
      resetGame();
      
      // å¼€å§‹æ¸¸æˆå¾ªç¯
      game.isRunning = true;
      game.isPaused = false;
      gameLoop();
    }

    // é‡ç½®æ¸¸æˆ
    function resetGame() {
      // é‡ç½®åˆ†æ•°
      game.score = 0;
      elements.currentScore.textContent = game.score;
      
      // åˆ›å»ºåˆå§‹è›‡
      const centerX = Math.floor(config.gridSize / 2);
      const centerY = Math.floor(config.gridSize / 2);
      
      game.snake = [
        { x: centerX, y: centerY },
        { x: centerX - 1, y: centerY },
        { x: centerX - 2, y: centerY }
      ];
      
      // é‡ç½®æ–¹å‘
      game.direction = config.directions.RIGHT;
      game.nextDirection = config.directions.RIGHT;
      
      // æ›´æ–°è›‡é•¿åº¦æ˜¾ç¤º
      elements.snakeLength.textContent = game.snake.length;
      
      // åˆ›å»ºé£Ÿç‰©
      spawnFood();
      
      // ç»˜åˆ¶æ¸¸æˆ
      drawGame();
    }

    // æ¸¸æˆå¾ªç¯
    function gameLoop() {
      if (!game.isRunning || game.isPaused) return;
      
      // æ›´æ–°æ¸¸æˆçŠ¶æ€
      updateGame();
      
      // ç»˜åˆ¶æ¸¸æˆ
      drawGame();
      
      // è®¾ç½®ä¸‹ä¸€æ¬¡å¾ªç¯
      game.gameLoop = setTimeout(gameLoop, game.speed);
    }

    // æ›´æ–°æ¸¸æˆçŠ¶æ€
    function updateGame() {
      // æ›´æ–°æ–¹å‘
      game.direction = game.nextDirection;
      
      // åˆ›å»ºæ–°çš„è›‡å¤´
      const head = {
        x: game.snake[0].x + game.direction.x,
        y: game.snake[0].y + game.direction.y
      };
      
      // ç©¿å¢™é€»è¾‘ï¼šå½“è›‡ç¢°åˆ°è¾¹ç•Œæ—¶ï¼Œä»å¯¹é¢ç©¿å›æ¥
      if (head.x < 0) {
        head.x = config.gridSize - 1;
      } else if (head.x >= config.gridSize) {
        head.x = 0;
      }
      
      if (head.y < 0) {
        head.y = config.gridSize - 1;
      } else if (head.y >= config.gridSize) {
        head.y = 0;
      }
      
      // æ£€æŸ¥è‡ªèº«ç¢°æ’
      if (checkSelfCollision(head)) {
        endGame();
        return;
      }
      
      // æ·»åŠ æ–°å¤´
      game.snake.unshift(head);
      
      // æ£€æŸ¥æ˜¯å¦åƒåˆ°é£Ÿç‰©
      if (head.x === game.food.x && head.y === game.food.y) {
        // å¢åŠ åˆ†æ•°
        game.score += 10;
        elements.currentScore.textContent = game.score;
        
        // æ›´æ–°è›‡é•¿åº¦æ˜¾ç¤º
        elements.snakeLength.textContent = game.snake.length;
        
        // æ’­æ”¾éŸ³æ•ˆ
        playSound('eat');
        
        // ç”Ÿæˆæ–°é£Ÿç‰©
        spawnFood();
      } else {
        // ç§»é™¤å°¾å·´
        game.snake.pop();
      }
    }

    // ç»˜åˆ¶æ¸¸æˆ
    function drawGame() {
      // æ¸…ç©ºç”»å¸ƒ
      game.ctx.fillStyle = '#1F2937';
      game.ctx.fillRect(0, 0, game.canvas.width, game.canvas.height);
      
      // ç»˜åˆ¶è›‡
      drawSnake();
      
      // ç»˜åˆ¶é£Ÿç‰©
      drawFood();
    }

    // ç»˜åˆ¶è›‡
    function drawSnake() {
      const colors = config.snakeColors[game.currentSkin];
      
      game.snake.forEach((segment, index) => {
        // è®¡ç®—é¢œè‰²ç´¢å¼•
        let colorIndex = 0;
        if (game.currentSkin === 'rainbow') {
          colorIndex = index % colors.length;
        } else {
          colorIndex = Math.min(Math.floor(index / 3), colors.length - 1);
        }
        
        // è®¾ç½®é¢œè‰²
        game.ctx.fillStyle = colors[colorIndex];
        
        // ç»˜åˆ¶è›‡æ®µ
        game.ctx.fillRect(
          segment.x * config.tileSize,
          segment.y * config.tileSize,
          config.tileSize - 1,
          config.tileSize - 1
        );
        
        // ç»˜åˆ¶è›‡æ®µè¾¹æ¡†
        game.ctx.strokeStyle = 'rgba(0, 0, 0, 0.2)';
        game.ctx.strokeRect(
          segment.x * config.tileSize,
          segment.y * config.tileSize,
          config.tileSize - 1,
          config.tileSize - 1
        );
      });
      
      // ç»˜åˆ¶è›‡å¤´
      const head = game.snake[0];
      game.ctx.fillStyle = colors[0];
      game.ctx.fillRect(
        head.x * config.tileSize,
        head.y * config.tileSize,
        config.tileSize - 1,
        config.tileSize - 1
      );
      
      // ç»˜åˆ¶è›‡å¤´è¾¹æ¡†
      game.ctx.strokeStyle = '#000';
      game.ctx.lineWidth = 2;
      game.ctx.strokeRect(
        head.x * config.tileSize,
        head.y * config.tileSize,
        config.tileSize - 1,
        config.tileSize - 1
      );
      game.ctx.lineWidth = 1;
    }

    // ç»˜åˆ¶é£Ÿç‰©
    function drawFood() {
      const foodColor = config.foodColors[game.currentFood];
      
      // ç»˜åˆ¶é£Ÿç‰©èƒŒæ™¯
      game.ctx.fillStyle = foodColor;
      game.ctx.beginPath();
      game.ctx.arc(
        game.food.x * config.tileSize + config.tileSize / 2,
        game.food.y * config.tileSize + config.tileSize / 2,
        config.tileSize / 2 - 2,
        0,
        Math.PI * 2
      );
      game.ctx.fill();
      
      // ç»˜åˆ¶é£Ÿç‰©è¾¹æ¡†
      game.ctx.strokeStyle = '#000';
      game.ctx.lineWidth = 2;
      game.ctx.stroke();
      game.ctx.lineWidth = 1;
      
      // ç»˜åˆ¶é£Ÿç‰©å›¾æ ‡ï¼ˆä½¿ç”¨Font Awesomeï¼‰
      // æ³¨æ„ï¼šè¿™é‡Œåªæ˜¯æ¨¡æ‹Ÿï¼Œå®é™…éœ€è¦ä½¿ç”¨å›¾æ ‡å­—ä½“æˆ–å›¾åƒ
      game.ctx.fillStyle = '#FFF';
      game.ctx.font = `${config.tileSize / 2}px FontAwesome`;
      game.ctx.textAlign = 'center';
      game.ctx.textBaseline = 'middle';
      
      const icon = getFoodIcon();
      game.ctx.fillText(
        icon,
        game.food.x * config.tileSize + config.tileSize / 2,
        game.food.y * config.tileSize + config.tileSize / 2
      );
    }

    // è·å–é£Ÿç‰©å›¾æ ‡
    function getFoodIcon() {
      const icons = {
        apple: 'ğŸ',
        cherry: 'ğŸ’',
        star: 'â­',
        diamond: 'ğŸ’',
        coin: 'ğŸª™',
        pizza: 'ğŸ•'
      };
      
      return icons[game.currentFood] || 'ğŸ';
    }

    // ç”Ÿæˆé£Ÿç‰©
    function spawnFood() {
      let newFood;
      
      // ç¡®ä¿é£Ÿç‰©ä¸åœ¨è›‡èº«ä¸Š
      do {
        newFood = {
          x: Math.floor(Math.random() * config.gridSize),
          y: Math.floor(Math.random() * config.gridSize)
        };
      } while (isOnSnake(newFood));
      
      game.food = newFood;
    }

    // æ£€æŸ¥é£Ÿç‰©æ˜¯å¦åœ¨è›‡èº«ä¸Š
    function isOnSnake(position) {
      return game.snake.some(segment => segment.x === position.x && segment.y === position.y);
    }

    // æ£€æŸ¥è‡ªèº«ç¢°æ’
    function checkSelfCollision(head) {
      for (let i = 1; i < game.snake.length; i++) {
        if (head.x === game.snake[i].x && head.y === game.snake[i].y) {
          playSound('self');
          return true;
        }
      }
      return false;
    }

    // å¤„ç†é”®ç›˜äº‹ä»¶
    function handleKeyDown(event) {
      // é˜»æ­¢æ–¹å‘é”®å’Œç©ºæ ¼é”®çš„é»˜è®¤è¡Œä¸ºï¼Œé˜²æ­¢é¡µé¢æ»šåŠ¨
      if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', ' '].includes(event.key)) {
        event.preventDefault();
      }
      
      switch (event.key) {
        case 'ArrowUp':
          changeDirection(config.directions.UP);
          break;
        case 'ArrowDown':
          changeDirection(config.directions.DOWN);
          break;
        case 'ArrowLeft':
          changeDirection(config.directions.LEFT);
          break;
        case 'ArrowRight':
          changeDirection(config.directions.RIGHT);
          break;
        case ' ':
          togglePause();
          break;
        case 'r':
        case 'R':
          restartGame();
          break;
      }
    }

    // æ”¹å˜æ–¹å‘
    function changeDirection(newDirection) {
      // é˜²æ­¢è›‡ç›´æ¥æ‰å¤´
      let isOpposite = false;
      
      // æ£€æŸ¥æ˜¯å¦æ˜¯ç›¸åæ–¹å‘
      if ((game.direction === config.directions.UP && newDirection === config.directions.DOWN) ||
          (game.direction === config.directions.DOWN && newDirection === config.directions.UP) ||
          (game.direction === config.directions.LEFT && newDirection === config.directions.RIGHT) ||
          (game.direction === config.directions.RIGHT && newDirection === config.directions.LEFT)) {
        isOpposite = true;
      }
      
      // å¦‚æœä¸æ˜¯ç›¸åæ–¹å‘ï¼Œåˆ™æ›´æ–°æ–¹å‘
      if (!isOpposite) {
        game.nextDirection = newDirection;
      }
    }

    // æš‚åœæ¸¸æˆ
    function pauseGame() {
      if (!game.isRunning) return;
      
      game.isPaused = true;
      elements.pauseScreen.classList.remove('hidden');
      clearTimeout(game.gameLoop);
    }

    // ç»§ç»­æ¸¸æˆ
    function resumeGame() {
      if (!game.isRunning) return;
      
      game.isPaused = false;
      elements.pauseScreen.classList.add('hidden');
      gameLoop();
    }

    // åˆ‡æ¢æš‚åœçŠ¶æ€
    function togglePause() {
      if (!game.isRunning) return;
      
      if (game.isPaused) {
        resumeGame();
      } else {
        pauseGame();
      }
    }

    // é‡æ–°å¼€å§‹æ¸¸æˆ
    function restartGame() {
      // éšè—æ‰€æœ‰ç•Œé¢
      elements.pauseScreen.classList.add('hidden');
      elements.gameOverScreen.classList.add('hidden');
      
      // é‡ç½®æ¸¸æˆ
      resetGame();
      
      // å¦‚æœæ¸¸æˆæ²¡æœ‰è¿è¡Œï¼Œåˆ™å¼€å§‹æ¸¸æˆ
      if (!game.isRunning) {
        game.isRunning = true;
        gameLoop();
      }
    }

    // è¿”å›ä¸»èœå•
    function backToMenu() {
      // åœæ­¢æ¸¸æˆ
      game.isRunning = false;
      clearTimeout(game.gameLoop);
      
      // éšè—æ¸¸æˆç»“æŸç•Œé¢
      elements.gameOverScreen.classList.add('hidden');
      
      // æ˜¾ç¤ºå¼€å§‹ç•Œé¢
      elements.startScreen.classList.remove('hidden');
    }

    // ç»“æŸæ¸¸æˆ
    function endGame() {
      game.isRunning = false;
      clearTimeout(game.gameLoop);
      
      // æ›´æ–°æœ€é«˜åˆ†
      if (game.score > game.highScore) {
        game.highScore = game.score;
        saveHighScore();
        
        // æ·»åŠ åˆ°æ’è¡Œæ¦œ
        addToLeaderboard(game.score);
      }
      
      // æ›´æ–°æ˜¾ç¤º
      elements.finalScore.textContent = game.score;
      elements.highScore.textContent = game.highScore;
      
      // æ˜¾ç¤ºæ¸¸æˆç»“æŸç•Œé¢
      elements.gameOverScreen.classList.remove('hidden');
      
      // æ’­æ”¾éŸ³æ•ˆ
      playSound('gameover');
    }

    // æ˜¾ç¤ºæ¸¸æˆè¯´æ˜
    function showHowToPlay() {
      elements.howToPlayModal.classList.remove('hidden');
    }

    // éšè—æ¸¸æˆè¯´æ˜
    function hideHowToPlay() {
      elements.howToPlayModal.classList.add('hidden');
    }

    // è®¾ç½®éš¾åº¦
    function setDifficulty(difficulty) {
      game.speed = config.speeds[difficulty] || config.initialSpeed;
      
      // æ›´æ–°æ˜¾ç¤º
      const speedText = {
        slow: 'ç®€å•',
        medium: 'ä¸­ç­‰',
        fast: 'å›°éš¾'
      };
      elements.gameSpeed.textContent = speedText[difficulty] || 'ä¸­ç­‰';
      
      // ä¿å­˜è®¾ç½®
      saveSettings();
    }

    // è®¾ç½®è›‡çš®è‚¤
    function setSnakeSkin(skin) {
      game.currentSkin = skin;
      
      // ä¿å­˜è®¾ç½®
      saveSettings();
      
      // å¦‚æœæ¸¸æˆæ­£åœ¨è¿è¡Œï¼Œé‡ç»˜æ¸¸æˆ
      if (game.isRunning) {
        drawGame();
      }
    }

    // è®¾ç½®é£Ÿç‰©æ ·å¼
    function setFoodStyle(food) {
      game.currentFood = food;
      
      // å¦‚æœæ¸¸æˆæ­£åœ¨è¿è¡Œï¼Œé‡ç»˜é£Ÿç‰©
      if (game.isRunning && game.food) {
        spawnFood();
        drawGame();
      }
      
      // ä¿å­˜è®¾ç½®
      saveSettings();
    }

    // åˆ‡æ¢éŸ³ä¹
    function toggleMusic() {
      const isEnabled = elements.musicToggle.checked;
      
      // æ›´æ–°å¼€å…³æ ·å¼
      updateToggleSwitches();
      
      // ä¿å­˜è®¾ç½®
      saveSettings();
      
      // è¿™é‡Œå¯ä»¥æ·»åŠ éŸ³ä¹æ§åˆ¶é€»è¾‘
      if (isEnabled) {
        // æ’­æ”¾èƒŒæ™¯éŸ³ä¹
        console.log('éŸ³ä¹å·²å¼€å¯');
      } else {
        // åœæ­¢èƒŒæ™¯éŸ³ä¹
        console.log('éŸ³ä¹å·²å…³é—­');
      }
    }

    // åˆ‡æ¢éŸ³æ•ˆ
    function toggleSound() {
      const isEnabled = elements.soundToggle.checked;
      
      // æ›´æ–°å¼€å…³æ ·å¼
      updateToggleSwitches();
      
      // ä¿å­˜è®¾ç½®
      saveSettings();
      
      console.log(`éŸ³æ•ˆå·²${isEnabled ? 'å¼€å¯' : 'å…³é—­'}`);
    }

    // åˆ‡æ¢ç½‘æ ¼
    function toggleGrid() {
      const isEnabled = elements.gridToggle.checked;
      
      // æ›´æ–°å¼€å…³æ ·å¼
      updateToggleSwitches();
      
      // ä¿å­˜è®¾ç½®
      saveSettings();
      
      // æ›´æ–°ç”»å¸ƒæ ·å¼
      if (isEnabled) {
        game.canvas.classList.add('game-grid');
      } else {
        game.canvas.classList.remove('game-grid');
      }
    }

    // åˆ‡æ¢æ·±è‰²æ¨¡å¼
    function toggleDarkMode() {
      const isEnabled = elements.darkModeToggle.checked;
      
      // æ›´æ–°å¼€å…³æ ·å¼
      updateToggleSwitches();
      
      // ä¿å­˜è®¾ç½®
      saveSettings();
      
      // æ›´æ–°é¡µé¢æ ·å¼
      if (isEnabled) {
        // åˆ‡æ¢åˆ°æ·±è‰²æ¨¡å¼
        document.body.classList.remove('bg-gradient-to-br', 'from-gray-100', 'to-gray-200', 'text-dark');
        document.body.classList.add('bg-gradient-to-br', 'from-dark', 'to-gray-800', 'text-light');
        
        // æ›´æ–°å…¶ä»–UIå…ƒç´ 
        updateDarkModeUI(true);
      } else {
        // åˆ‡æ¢åˆ°æµ…è‰²æ¨¡å¼
        document.body.classList.remove('bg-gradient-to-br', 'from-dark', 'to-gray-800', 'text-light');
        document.body.classList.add('bg-gradient-to-br', 'from-gray-100', 'to-gray-200', 'text-dark');
        
        // æ›´æ–°å…¶ä»–UIå…ƒç´ 
        updateDarkModeUI(false);
      }
      
      // å¦‚æœæ¸¸æˆæ­£åœ¨è¿è¡Œï¼Œé‡ç»˜æ¸¸æˆ
      if (game.isRunning) {
        drawGame();
      }
    }
    
    // æ›´æ–°æ·±è‰²æ¨¡å¼UI
    function updateDarkModeUI(isDarkMode) {
      // æ›´æ–°å¤´éƒ¨å’Œå¯¼èˆª
      const header = document.querySelector('header');
      const navLinks = document.querySelectorAll('nav a');
      
      if (isDarkMode) {
        header.classList.add('bg-dark', 'bg-opacity-80', 'border-gray-700');
        header.classList.remove('bg-gray-100', 'border-gray-300');
        
        navLinks.forEach(link => {
          link.classList.add('text-light', 'hover:text-primary');
          link.classList.remove('text-dark', 'hover:text-gray-700');
        });
      } else {
        header.classList.remove('bg-dark', 'bg-opacity-80', 'border-gray-700');
        header.classList.add('bg-gray-100', 'border-gray-300');
        
        navLinks.forEach(link => {
          link.classList.remove('text-light', 'hover:text-primary');
          link.classList.add('text-dark', 'hover:text-gray-700');
        });
      }
      
      // æ›´æ–°å¡ç‰‡å’Œæ¨¡æ€æ¡†
      const cards = document.querySelectorAll('.bg-gray-800, .bg-gray-700');
      const modals = document.querySelectorAll('#howToPlayModal');
      
      cards.forEach(card => {
        if (isDarkMode) {
          card.classList.add('bg-gray-800', 'bg-opacity-80', 'border-gray-700');
          card.classList.remove('bg-white', 'border-gray-300');
        } else {
          card.classList.remove('bg-gray-800', 'bg-opacity-80', 'border-gray-700');
          card.classList.add('bg-white', 'border-gray-300');
        }
      });
      
      modals.forEach(modal => {
        if (isDarkMode) {
          modal.querySelector('.bg-gray-800').classList.add('bg-gray-800');
          modal.querySelector('.bg-gray-800').classList.remove('bg-white');
        } else {
          modal.querySelector('.bg-gray-800').classList.remove('bg-gray-800');
          modal.querySelector('.bg-gray-800').classList.add('bg-white');
        }
      });
      
      // æ›´æ–°æ¸¸æˆç”»å¸ƒèƒŒæ™¯
      if (game.ctx) {
        game.ctx.fillStyle = isDarkMode ? '#1F2937' : '#F3F4F6';
        game.ctx.fillRect(0, 0, game.canvas.width, game.canvas.height);
      }
    }

    // æ’­æ”¾éŸ³æ•ˆ
    function playSound(type) {
      // å¦‚æœéŸ³æ•ˆè¢«ç¦ç”¨ï¼Œä¸æ’­æ”¾
      if (!elements.soundToggle.checked) return;
      
      // è¿™é‡Œå¯ä»¥æ·»åŠ éŸ³æ•ˆæ’­æ”¾é€»è¾‘
      console.log(`æ’­æ”¾éŸ³æ•ˆ: ${type}`);
    }

    // ä¿å­˜æœ€é«˜åˆ†
    function saveHighScore() {
      localStorage.setItem('snakeHighScore', game.highScore);
    }

    // åŠ è½½æœ€é«˜åˆ†
    function loadHighScore() {
      game.highScore = parseInt(localStorage.getItem('snakeHighScore')) || 0;
    }

    // ä¿å­˜è®¾ç½®
    function saveSettings() {
      const settings = {
        skin: game.currentSkin,
        food: game.currentFood,
        difficulty: Object.keys(config.speeds).find(key => config.speeds[key] === game.speed) || 'medium',
        music: elements.musicToggle.checked,
        sound: elements.soundToggle.checked,
        grid: elements.gridToggle.checked,
        darkMode: elements.darkModeToggle.checked
      };
      
      localStorage.setItem('snakeSettings', JSON.stringify(settings));
    }

    // æ·»åŠ åˆ°æ’è¡Œæ¦œ
    function addToLeaderboard(score) {
      let leaderboard = JSON.parse(localStorage.getItem('snakeLeaderboard')) || [];
      
      // æ·»åŠ æ–°åˆ†æ•°
      leaderboard.push({
        player: 'ç©å®¶',
        score: score,
        date: new Date().toISOString().split('T')[0]
      });
      
      // æŒ‰åˆ†æ•°æ’åº
      leaderboard.sort((a, b) => b.score - a.score);
      
      // åªä¿ç•™å‰10å
      leaderboard = leaderboard.slice(0, 10);
      
      // ä¿å­˜æ’è¡Œæ¦œ
      localStorage.setItem('snakeLeaderboard', JSON.stringify(leaderboard));
      
      // æ›´æ–°æ’è¡Œæ¦œæ˜¾ç¤º
      updateLeaderboard();
    }

    // åŠ è½½æ’è¡Œæ¦œ
    function loadLeaderboard() {
      const leaderboard = JSON.parse(localStorage.getItem('snakeLeaderboard')) || [];
      
      // å¦‚æœæ²¡æœ‰æ’è¡Œæ¦œæ•°æ®ï¼Œä½¿ç”¨é»˜è®¤æ•°æ®
      if (leaderboard.length === 0) {
        const defaultLeaderboard = [
          { player: 'è´ªåƒè›‡å¤§å¸ˆ', score: 1250, date: '2025-07-21' },
          { player: 'æ¸¸æˆçˆ±å¥½è€…', score: 980, date: '2025-07-20' },
          { player: 'è›‡è›‡äº‰éœ¸', score: 850, date: '2025-07-19' },
          { player: 'ä¼‘é—²ç©å®¶', score: 720, date: '2025-07-18' },
          { player: 'åˆå­¦è€…', score: 650, date: '2025-07-17' }
        ];
        
        localStorage.setItem('snakeLeaderboard', JSON.stringify(defaultLeaderboard));
        updateLeaderboard(defaultLeaderboard);
      } else {
        updateLeaderboard(leaderboard);
      }
    }

    // æ›´æ–°æ’è¡Œæ¦œæ˜¾ç¤º
    function updateLeaderboard(leaderboard = null) {
      if (!leaderboard) {
        leaderboard = JSON.parse(localStorage.getItem('snakeLeaderboard')) || [];
      }
      
      // æ¸…ç©ºæ’è¡Œæ¦œ
      elements.leaderboardBody.innerHTML = '';
      
      // æ·»åŠ æ’è¡Œæ¦œé¡¹
      leaderboard.forEach((entry, index) => {
        const row = document.createElement('tr');
        row.className = 'border-b border-gray-700 hover:bg-gray-700';
        
        // æ’å
        const rankCell = document.createElement('td');
        rankCell.className = 'py-3 px-4';
        
        if (index === 0) {
          rankCell.innerHTML = '<i class="fa fa-trophy text-yellow-500 mr-2"></i>1';
        } else if (index === 1) {
          rankCell.innerHTML = '<i class="fa fa-trophy text-gray-400 mr-2"></i>2';
        } else if (index === 2) {
          rankCell.innerHTML = '<i class="fa fa-trophy text-amber-700 mr-2"></i>3';
        } else {
          rankCell.textContent = index + 1;
        }
        
        // ç©å®¶
        const playerCell = document.createElement('td');
        playerCell.className = 'py-3 px-4';
        playerCell.textContent = entry.player;
        
        // å¾—åˆ†
        const scoreCell = document.createElement('td');
        scoreCell.className = 'py-3 px-4 font-bold';
        scoreCell.textContent = entry.score;
        
        // æ—¥æœŸ
        const dateCell = document.createElement('td');
        dateCell.className = 'py-3 px-4';
        dateCell.textContent = entry.date;
        
        // æ·»åŠ å•å…ƒæ ¼åˆ°è¡Œ
        row.appendChild(rankCell);
        row.appendChild(playerCell);
        row.appendChild(scoreCell);
        row.appendChild(dateCell);
        
        // æ·»åŠ è¡Œåˆ°è¡¨æ ¼
        elements.leaderboardBody.appendChild(row);
      });
    }

    // æ¸…ç©ºæ’è¡Œæ¦œ
    function clearLeaderboard() {
      if (confirm('ç¡®å®šè¦æ¸…ç©ºæ’è¡Œæ¦œå—ï¼Ÿ')) {
        localStorage.removeItem('snakeLeaderboard');
        loadLeaderboard();
      }
    }

    // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–æ¸¸æˆ
    window.addEventListener('DOMContentLoaded', initGame);
  </script>
</body>
</html>
